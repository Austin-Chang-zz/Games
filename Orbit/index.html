<!DOCTYPE html>
<html lang="zh-TW">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å¤ªé™½ç³»æ¢ç´¢è€… - 3D å¤ªç©ºæ¢ç´¢éŠæˆ²</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: radial-gradient(ellipse at center, #1a1a2e 0%, #16213e 50%, #0f0f23 100%);
            overflow: hidden;
            color: white;
        }

        #gameContainer {
            position: relative;
            width: 100vw;
            height: 100vh;
        }

        #canvas {
            display: block;
            cursor: grab;
        }

        #canvas:active {
            cursor: grabbing;
        }

        .ui-panel {
            position: absolute;
            background: rgba(0, 20, 40, 0.9);
            border: 1px solid rgba(100, 200, 255, 0.3);
            border-radius: 10px;
            padding: 15px;
            backdrop-filter: blur(10px);
        }

        .control-panel {
            top: 20px;
            left: 20px;
            width: 280px;
        }

        .info-panel {
            top: 20px;
            right: 20px;
            width: 300px;
            max-height: 400px;
            overflow-y: auto;
        }

        .bottom-panel {
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 15px;
            align-items: center;
        }

        h3 {
            color: #64b5f6;
            margin-bottom: 10px;
            font-size: 16px;
        }

        .control-group {
            margin-bottom: 15px;
        }

        label {
            display: block;
            margin-bottom: 5px;
            font-size: 12px;
            color: #b0bec5;
        }

        input[type="range"] {
            width: 100%;
            margin-bottom: 5px;
        }

        button {
            background: linear-gradient(45deg, #1976d2, #42a5f5);
            border: none;
            color: white;
            padding: 8px 16px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 12px;
            transition: all 0.3s ease;
        }

        button:hover {
            background: linear-gradient(45deg, #1565c0, #1e88e5);
            transform: translateY(-1px);
        }

        .planet-button {
            margin: 2px;
            padding: 6px 12px;
            font-size: 11px;
        }

        .active {
            background: linear-gradient(45deg, #f57c00, #ff9800);
        }

        .stats {
            font-size: 11px;
            line-height: 1.4;
            color: #e1f5fe;
        }

        .highlight {
            color: #ffeb3b;
            font-weight: bold;
        }

        .educational-info {
            background: rgba(25, 118, 210, 0.1);
            border-left: 3px solid #1976d2;
            padding: 10px;
            margin: 10px 0;
            border-radius: 5px;
        }

        .physics-display {
            background: rgba(76, 175, 80, 0.1);
            border-left: 3px solid #4caf50;
            padding: 8px;
            margin: 8px 0;
            border-radius: 3px;
            font-size: 10px;
        }

        #stars {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
        }
    </style>
</head>

<body>
    <div id="gameContainer">
        <canvas id="stars"></canvas>
        <canvas id="canvas"></canvas>

        <div class="ui-panel control-panel">
            <h3>ğŸš€ æ§åˆ¶é¢æ¿</h3>

            <div class="control-group">
                <label>æ™‚é–“é€Ÿåº¦</label>
                <input type="range" id="timeSpeed" min="0" max="5" step="0.1" value="1">
                <span id="speedDisplay">1.0x</span>
            </div>

            <div class="control-group">
                <label>ç¸®æ”¾</label>
                <input type="range" id="zoomSlider" min="0.5" max="3" step="0.1" value="1">
            </div>

            <div class="control-group">
                <label>é¸æ“‡å¤©é«”</label>
                <div>
                    <button class="planet-button active" data-planet="earth">ğŸŒ åœ°çƒ</button>
                    <button class="planet-button" data-planet="moon">ğŸŒ™ æœˆçƒ</button>
                    <button class="planet-button" data-planet="mars">ğŸ”´ ç«æ˜Ÿ</button>
                </div>
            </div>

            <div class="control-group">
                <button id="resetView">é‡ç½®è¦–è§’</button>
                <button id="toggleOrbits">é¡¯ç¤ºè»Œé“</button>
            </div>
        </div>

        <div class="ui-panel info-panel">
            <h3 id="selectedPlanetName">ğŸŒ åœ°çƒ</h3>
            <div id="planetInfo" class="stats">
                <div class="educational-info">
                    <strong>åŸºæœ¬è³‡è¨Šï¼š</strong><br>
                    ç›´å¾‘ï¼š<span class="highlight">12,742 å…¬é‡Œ</span><br>
                    è·é›¢å¤ªé™½ï¼š<span class="highlight">1.496 å„„å…¬é‡Œ</span><br>
                    å…¬è½‰é€±æœŸï¼š<span class="highlight">365.25 å¤©</span>
                </div>

                <div class="physics-display">
                    <strong>ç‰©ç†åƒæ•¸ï¼š</strong><br>
                    è»Œé“é€Ÿåº¦ï¼š<span id="orbitalSpeed">29.78 km/s</span><br>
                    é‡åŠ›ï¼š<span id="gravity">9.81 m/sÂ²</span><br>
                    ç•¶å‰è§’åº¦ï¼š<span id="currentAngle">0Â°</span>
                </div>

                <div class="educational-info">
                    <strong>æœ‰è¶£äº‹å¯¦ï¼š</strong><br>
                    <span id="funFact">åœ°çƒæ˜¯å¤ªé™½ç³»ä¸­å”¯ä¸€å·²çŸ¥æœ‰ç”Ÿå‘½çš„è¡Œæ˜Ÿï¼Œ71%çš„è¡¨é¢è¢«æ°´è¦†è“‹ã€‚</span>
                </div>
            </div>
        </div>

        <div class="ui-panel bottom-panel">
            <button id="pausePlay">â¸ï¸ æš«åœ</button>
            <span>æ‹–æ‹½æ»‘é¼ æ—‹è½‰è¦–è§’ | æ»¾è¼ªç¸®æ”¾</span>
        </div>
    </div>

    <script>
        class SolarSystemExplorer {
            constructor() {
                this.canvas = document.getElementById('canvas');
                this.ctx = this.canvas.getContext('2d');
                this.starsCanvas = document.getElementById('stars');
                this.starsCtx = this.starsCanvas.getContext('2d');

                this.setupCanvas();
                this.setupStars();

                // éŠæˆ²ç‹€æ…‹
                this.timeSpeed = 1;
                this.zoom = 1;
                this.rotation = { x: 0, y: 0 };
                this.selectedPlanet = 'earth';
                this.showOrbits = true;
                this.isPaused = false;
                this.time = 0;

                // æ»‘é¼ æ§åˆ¶
                this.isDragging = false;
                this.lastMouse = { x: 0, y: 0 };

                // å¤©é«”è³‡æ–™
                this.celestialBodies = {
                    sun: {
                        name: 'å¤ªé™½',
                        radius: 30,
                        color: '#FDB813',
                        x: 0, y: 0,
                        info: {
                            diameter: '1,392,700 å…¬é‡Œ',
                            distance: '0 å…¬é‡Œ',
                            period: 'ä¸é©ç”¨',
                            speed: '0 km/s',
                            gravity: '274 m/sÂ²',
                            fact: 'å¤ªé™½æ˜¯å¤ªé™½ç³»çš„ä¸­å¿ƒï¼ŒåŒ…å«äº†å¤ªé™½ç³»99.86%çš„è³ªé‡ã€‚'
                        }
                    },
                    earth: {
                        name: 'åœ°çƒ',
                        radius: 8,
                        color: '#6B93D6',
                        orbitRadius: 150,
                        orbitSpeed: 0.02,
                        angle: 0,
                        info: {
                            diameter: '12,742 å…¬é‡Œ',
                            distance: '1.496 å„„å…¬é‡Œ',
                            period: '365.25 å¤©',
                            speed: '29.78 km/s',
                            gravity: '9.81 m/sÂ²',
                            fact: 'åœ°çƒæ˜¯å¤ªé™½ç³»ä¸­å”¯ä¸€å·²çŸ¥æœ‰ç”Ÿå‘½çš„è¡Œæ˜Ÿï¼Œ71%çš„è¡¨é¢è¢«æ°´è¦†è“‹ã€‚'
                        }
                    },
                    moon: {
                        name: 'æœˆçƒ',
                        radius: 3,
                        color: '#C0C0C0',
                        orbitRadius: 25,
                        orbitSpeed: 0.08,
                        angle: 0,
                        parent: 'earth',
                        info: {
                            diameter: '3,474 å…¬é‡Œ',
                            distance: '384,400 å…¬é‡Œï¼ˆè·åœ°çƒï¼‰',
                            period: '27.3 å¤©',
                            speed: '1.02 km/s',
                            gravity: '1.62 m/sÂ²',
                            fact: 'æœˆçƒæ˜¯åœ°çƒå”¯ä¸€çš„å¤©ç„¶è¡›æ˜Ÿï¼Œå®ƒçš„å¼•åŠ›é€ æˆåœ°çƒçš„æ½®æ±ç¾è±¡ã€‚'
                        }
                    },
                    mars: {
                        name: 'ç«æ˜Ÿ',
                        radius: 6,
                        color: '#CD5C5C',
                        orbitRadius: 220,
                        orbitSpeed: 0.015,
                        angle: Math.PI,
                        info: {
                            diameter: '6,779 å…¬é‡Œ',
                            distance: '2.279 å„„å…¬é‡Œ',
                            period: '687 å¤©',
                            speed: '24.07 km/s',
                            gravity: '3.71 m/sÂ²',
                            fact: 'ç«æ˜Ÿè¢«ç¨±ç‚ºç´…è‰²è¡Œæ˜Ÿï¼Œå› ç‚ºå…¶è¡¨é¢å¯Œå«æ°§åŒ–éµã€‚å®ƒæœ‰å…©å€‹å°è¡›æ˜Ÿï¼šç«è¡›ä¸€å’Œç«è¡›äºŒã€‚'
                        }
                    }
                };

                this.setupEventListeners();
                this.updatePlanetInfo();
                this.animate();
            }

            setupCanvas() {
                const resize = () => {
                    this.canvas.width = window.innerWidth;
                    this.canvas.height = window.innerHeight;
                    this.starsCanvas.width = window.innerWidth;
                    this.starsCanvas.height = window.innerHeight;
                };
                resize();
                window.addEventListener('resize', resize);
            }

            setupStars() {
                const stars = [];
                for (let i = 0; i < 200; i++) {
                    stars.push({
                        x: Math.random() * this.starsCanvas.width,
                        y: Math.random() * this.starsCanvas.height,
                        size: Math.random() * 2,
                        opacity: Math.random()
                    });
                }

                const drawStars = () => {
                    this.starsCtx.clearRect(0, 0, this.starsCanvas.width, this.starsCanvas.height);
                    stars.forEach(star => {
                        this.starsCtx.fillStyle = `rgba(255, 255, 255, ${star.opacity})`;
                        this.starsCtx.fillRect(star.x, star.y, star.size, star.size);
                    });
                };
                drawStars();
            }

            setupEventListeners() {
                // æ™‚é–“æ§åˆ¶
                document.getElementById('timeSpeed').addEventListener('input', (e) => {
                    this.timeSpeed = parseFloat(e.target.value);
                    document.getElementById('speedDisplay').textContent = this.timeSpeed.toFixed(1) + 'x';
                });

                // ç¸®æ”¾æ§åˆ¶
                document.getElementById('zoomSlider').addEventListener('input', (e) => {
                    this.zoom = parseFloat(e.target.value);
                });

                // è¡Œæ˜Ÿé¸æ“‡
                document.querySelectorAll('.planet-button').forEach(btn => {
                    btn.addEventListener('click', (e) => {
                        document.querySelectorAll('.planet-button').forEach(b => b.classList.remove('active'));
                        e.target.classList.add('active');
                        this.selectedPlanet = e.target.dataset.planet;
                        this.updatePlanetInfo();
                    });
                });

                // æ§åˆ¶æŒ‰éˆ•
                document.getElementById('resetView').addEventListener('click', () => {
                    this.rotation = { x: 0, y: 0 };
                    this.zoom = 1;
                    document.getElementById('zoomSlider').value = 1;
                });

                document.getElementById('toggleOrbits').addEventListener('click', (e) => {
                    this.showOrbits = !this.showOrbits;
                    e.target.textContent = this.showOrbits ? 'éš±è—è»Œé“' : 'é¡¯ç¤ºè»Œé“';
                });

                document.getElementById('pausePlay').addEventListener('click', (e) => {
                    this.isPaused = !this.isPaused;
                    e.target.textContent = this.isPaused ? 'â–¶ï¸ æ’­æ”¾' : 'â¸ï¸ æš«åœ';
                });

                // æ»‘é¼ æ§åˆ¶
                this.canvas.addEventListener('mousedown', (e) => {
                    this.isDragging = true;
                    this.lastMouse = { x: e.clientX, y: e.clientY };
                });

                this.canvas.addEventListener('mousemove', (e) => {
                    if (this.isDragging) {
                        const deltaX = e.clientX - this.lastMouse.x;
                        const deltaY = e.clientY - this.lastMouse.y;
                        this.rotation.y += deltaX * 0.01;
                        this.rotation.x += deltaY * 0.01;
                        this.lastMouse = { x: e.clientX, y: e.clientY };
                    }
                });

                this.canvas.addEventListener('mouseup', () => {
                    this.isDragging = false;
                });

                this.canvas.addEventListener('wheel', (e) => {
                    e.preventDefault();
                    this.zoom *= (1 - e.deltaY * 0.001);
                    this.zoom = Math.max(0.5, Math.min(3, this.zoom));
                    document.getElementById('zoomSlider').value = this.zoom;
                });
            }

            updatePlanetInfo() {
                const planet = this.celestialBodies[this.selectedPlanet];
                const planetEmojis = {
                    earth: 'ğŸŒ',
                    moon: 'ğŸŒ™',
                    mars: 'ğŸ”´'
                };

                document.getElementById('selectedPlanetName').textContent =
                    `${planetEmojis[this.selectedPlanet]} ${planet.name}`;

                const info = planet.info;
                document.getElementById('planetInfo').innerHTML = `
                    <div class="educational-info">
                        <strong>åŸºæœ¬è³‡è¨Šï¼š</strong><br>
                        ç›´å¾‘ï¼š<span class="highlight">${info.diameter}</span><br>
                        è·é›¢ï¼š<span class="highlight">${info.distance}</span><br>
                        å…¬è½‰é€±æœŸï¼š<span class="highlight">${info.period}</span>
                    </div>
                    
                    <div class="physics-display">
                        <strong>ç‰©ç†åƒæ•¸ï¼š</strong><br>
                        è»Œé“é€Ÿåº¦ï¼š<span id="orbitalSpeed">${info.speed}</span><br>
                        é‡åŠ›ï¼š<span id="gravity">${info.gravity}</span><br>
                        ç•¶å‰è§’åº¦ï¼š<span id="currentAngle">${(planet.angle * 180 / Math.PI).toFixed(1)}Â°</span>
                    </div>
                    
                    <div class="educational-info">
                        <strong>æœ‰è¶£äº‹å¯¦ï¼š</strong><br>
                        <span id="funFact">${info.fact}</span>
                    </div>
                `;
            }

            updatePhysics() {
                if (this.isPaused) return;

                this.time += this.timeSpeed * 0.016;

                // æ›´æ–°è¡Œæ˜Ÿä½ç½®
                Object.keys(this.celestialBodies).forEach(key => {
                    const body = this.celestialBodies[key];
                    if (body.orbitSpeed) {
                        body.angle += body.orbitSpeed * this.timeSpeed;

                        if (body.parent) {
                            // è¡›æ˜Ÿç¹è¡Œæ˜Ÿé‹å‹•
                            const parent = this.celestialBodies[body.parent];
                            body.x = parent.x + Math.cos(body.angle) * body.orbitRadius;
                            body.y = parent.y + Math.sin(body.angle) * body.orbitRadius;
                        } else {
                            // è¡Œæ˜Ÿç¹å¤ªé™½é‹å‹•
                            body.x = Math.cos(body.angle) * body.orbitRadius;
                            body.y = Math.sin(body.angle) * body.orbitRadius;
                        }
                    }
                });

                // æ›´æ–°é¸ä¸­è¡Œæ˜Ÿçš„è³‡è¨Š
                const selectedBody = this.celestialBodies[this.selectedPlanet];
                if (selectedBody.angle !== undefined) {
                    document.getElementById('currentAngle').textContent =
                        (selectedBody.angle * 180 / Math.PI % 360).toFixed(1) + 'Â°';
                }
            }

            render() {
                this.ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);

                const centerX = this.canvas.width / 2;
                const centerY = this.canvas.height / 2;

                // ç¹ªè£½è»Œé“
                if (this.showOrbits) {
                    this.ctx.strokeStyle = 'rgba(100, 200, 255, 0.3)';
                    this.ctx.lineWidth = 1;

                    Object.values(this.celestialBodies).forEach(body => {
                        if (body.orbitRadius && !body.parent) {
                            this.ctx.beginPath();
                            this.ctx.arc(centerX, centerY, body.orbitRadius * this.zoom, 0, Math.PI * 2);
                            this.ctx.stroke();
                        }
                    });
                }

                // ç¹ªè£½å¤©é«”
                Object.keys(this.celestialBodies).forEach(key => {
                    const body = this.celestialBodies[key];
                    const x = centerX + (body.x || 0) * this.zoom;
                    const y = centerY + (body.y || 0) * this.zoom;
                    const radius = body.radius * this.zoom;

                    // ç¹ªè£½å¤©é«”
                    this.ctx.fillStyle = body.color;
                    this.ctx.beginPath();
                    this.ctx.arc(x, y, radius, 0, Math.PI * 2);
                    this.ctx.fill();

                    // æ·»åŠ å…‰æšˆæ•ˆæœ
                    if (key === 'sun') {
                        const gradient = this.ctx.createRadialGradient(x, y, radius, x, y, radius * 2);
                        gradient.addColorStop(0, 'rgba(253, 184, 19, 0.3)');
                        gradient.addColorStop(1, 'rgba(253, 184, 19, 0)');
                        this.ctx.fillStyle = gradient;
                        this.ctx.beginPath();
                        this.ctx.arc(x, y, radius * 2, 0, Math.PI * 2);
                        this.ctx.fill();
                    }

                    // é«˜äº®é¸ä¸­çš„å¤©é«”
                    if (key === this.selectedPlanet) {
                        this.ctx.strokeStyle = '#ffeb3b';
                        this.ctx.lineWidth = 2;
                        this.ctx.beginPath();
                        this.ctx.arc(x, y, radius + 5, 0, Math.PI * 2);
                        this.ctx.stroke();
                    }

                    // ç¹ªè£½æœˆçƒè»Œé“
                    if (key === 'earth' && this.showOrbits) {
                        this.ctx.strokeStyle = 'rgba(192, 192, 192, 0.5)';
                        this.ctx.lineWidth = 1;
                        this.ctx.beginPath();
                        this.ctx.arc(x, y, this.celestialBodies.moon.orbitRadius * this.zoom, 0, Math.PI * 2);
                        this.ctx.stroke();
                    }
                });
            }

            animate() {
                this.updatePhysics();
                this.render();
                requestAnimationFrame(() => this.animate());
            }
        }

        // å•Ÿå‹•éŠæˆ²
        window.addEventListener('load', () => {
            new SolarSystemExplorer();
        });
    </script>
    <script>(function () { function c() { var b = a.contentDocument || a.contentWindow.document; if (b) { var d = b.createElement('script'); d.innerHTML = "window.__CF$cv$params={r:'9779137586b74a0c',t:'MTc1NjYwNzExMy4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);"; b.getElementsByTagName('head')[0].appendChild(d) } } if (document.body) { var a = document.createElement('iframe'); a.height = 1; a.width = 1; a.style.position = 'absolute'; a.style.top = 0; a.style.left = 0; a.style.border = 'none'; a.style.visibility = 'hidden'; document.body.appendChild(a); if ('loading' !== document.readyState) c(); else if (window.addEventListener) document.addEventListener('DOMContentLoaded', c); else { var e = document.onreadystatechange || function () { }; document.onreadystatechange = function (b) { e(b); 'loading' !== document.readyState && (document.onreadystatechange = e, c()) } } } })();</script>
</body>

</html>